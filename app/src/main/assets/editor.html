<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />

    <!-- Quill 1.3.6 -->
    <link rel="stylesheet" href="quill.snow.css">

    <style>

        html, body {
          margin: 0;
          padding: 0;
          background: #ffffff;
          font-family: system-ui, -apple-system, sans-serif;
          color: #111;
          overflow: visible; /* ⚠️ ne PAS mettre auto/scroll */
        }


        #toolbar-wrapper {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          z-index: 1000;
          background: #f5f5f5;
          border-bottom: 1px solid #ddd;
        }


        #editor {
          margin-top: 56px; /* hauteur réelle de la toolbar */
        }

        .ql-container {
          border: none;
        }

        .ql-editor {
          padding: 16px;
          font-size: 16px;
          line-height: 1.6;
        }

        /* Placeholder */
        .ql-editor.ql-blank::before {
          color: #999;
        }

        /* Images */
        .ql-editor img {
          max-width: 100%;
          border-radius: 8px;
          margin: 8px 0;
        }
    </style>
</head>
<body>

<div id="toolbar-wrapper">
    <div id="toolbar">
    <span class="ql-formats">
      <button class="ql-bold"></button>
      <button class="ql-italic"></button>
      <button class="ql-underline"></button>
    </span>

        <span class="ql-formats">
      <select class="ql-size">
        <option value="small"></option>
        <option selected></option>
        <option value="large"></option>
        <option value="huge"></option>
      </select>
    </span>

        <span class="ql-formats">
      <button class="ql-list" value="ordered"></button>
      <button class="ql-list" value="bullet"></button>
    </span>

        <span class="ql-formats">
      <button class="ql-image"></button>
      <button class="ql-clean"></button>
    </span>

        <span class="ql-formats">
      <select class="ql-color"></select>
      <select class="ql-background"></select>
    </span>
    </div>
</div>


<div id="editor"></div>

<script src="quill.js"></script>
<script>
    const quill = new Quill('#editor', {
        theme: 'snow',
        placeholder: 'Question (recto)',
        modules: {
          toolbar: {
            container: '#toolbar',
            handlers: {
              image: function () {
                if (window.Android && Android.pickImage) {
                  Android.pickImage();
                }
              }
            }
          }
        }
    });


    quill.on('text-change', function () {
      if (window.Android && Android.onEditorChanged) {
        Android.onEditorChanged(quill.root.innerHTML);
      }
    });

        function getContent() {
          return quill.root.innerHTML;
        }

        function setContent(html) {
          quill.root.innerHTML = html || '';
        }

        function setPlaceholder(text) {
          quill.root.dataset.placeholder = text;
        }

        function insertImage(base64) {
            const range = quill.getSelection(true);
            quill.insertEmbed(range.index, 'image', base64);
        }
</script>

</body>
</html>